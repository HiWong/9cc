%{
#include <stdio.h>
#include <assert.h>
#include <stdlib.h>
#include <stdint.h>
#include "cc.h"

#define MAX_STRUCT_PARAM_SIZE  16

typedef struct tree TREE_TYPE;
#define LEFT_KID(p)  ((p)->kids[0])
#define RIGHT_KID(p)  ((p)->kids[1])
#define TREE_OP(p)  ((p)->op)
#define TREE_STATE(p)   ((p)->x.state)

#define burg(name)  burg_##name
%}

%term CNSTI4 = 1024

%%
stmt:   CNSTI4  ""
%%

static void init(int argc, char *argv[])
{
}

static void finalize(void)
{
}

static void defvar(struct symbol *sym)
{
}

static void defun(struct symbol *sym)
{
}

struct interface *IR = &(struct interface) {
    // os/arch
    .os = "linux",
    .arch = "x86_64",
    // size  align  rank
    .boolmetrics = {1, 1, 10},
    .charmetrics = {1, 1, 20},
    .shortmetrics = {2, 2, 30},
    .wcharmetrics = {4, 4, 40},
    .intmetrics = {4, 4, 40},
    .longmetrics = {8, 8, 50},
    .longlongmetrics = {8, 8, 60},
    .floatmetrics = {4, 4, 70},
    .doublemetrics = {8, 8, 80},
    .longdoublemetrics = {8, 8, 90},
    .ptrmetrics = {8, 8, 0},
    .voidmetrics = {0, 1, 0},
    // func
    .init = init,
    .finalize = finalize,
    .defvar = defvar,
    .defun = defun,
    // xface
    .x = {
        .label = burg(label),
        .rule = burg(rule),
        .kids = burg(nts_kids),
        .rule_names = burg(rule_names),
        .nt_names = burg(nt_names),
        .templates = burg(rule_templates),
        .nts = burg(nts),
        .max_kids = burg(max_nts),
        .nts_count = burg(max_nt),
    },
};
